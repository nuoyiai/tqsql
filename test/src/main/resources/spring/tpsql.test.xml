<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

	<import resource="classpath:tpsql.dao.xml" />
	<import resource="classpath:spring/tpsql.datasource.xml" />
	<import resource="classpath:spring/jedisPool.xml" />

	<!-- 分模块加载SQL配置 -->
	<bean id="testSqlMap" class="tpsql.sql.mapping.SqlContext" >
		<property name="resources">
			<set>
				<value>classpath*:/sqlmap/mysql.initTestDb.sqlMap.xml</value>
				<value>classpath*:/sqlmap/build/*.sqlMap.xml</value>
			</set>
		</property>
	</bean>

	<!-- 模块总配 -->
	<bean id="SqlMap" parent="AbstractSqlMap" >
		<property name="contexts" >
			<set merge="true">
				<ref bean="testSqlMap"></ref>
			</set>
		</property>
	</bean>

	<!-- 实体映射文件 -->
	<bean id="EntityMap" parent="AbstractEntityMap" >
		<property name="mappingLocations">
			<set>
                <value>classpath*:/sqlmap/mapping/*.sqlMap.xml</value>
			</set>
		</property>
	</bean>

	<!-- 数据源和数据库类型 -->
	<bean id="MyDbConfig" parent="DbConfig" >
		<property name="dbType" value="MySql"/>
		<property name="dataSource" ref="basicDataSource"/>
	</bean>

	<!-- 数据库方言 -->
	<bean id="DbConfig" abstract="true" class="tpsql.sql.config.DbConfig" >
		<property name="dialects">
			<map>
				<entry key="Oracle" value="banger.framework.sql.dialect.Oracle10gDialect" />
				<entry key="MySql" value="banger.framework.sql.dialect.MySqlDialect" />
				<entry key="Sqlite" value="banger.framework.sql.dialect.SqlLiteDialect" />
				<entry key="DB2" value="banger.framework.sql.dialect.DB2Dialect" />
			</map>
		</property>
	</bean>

 </beans>